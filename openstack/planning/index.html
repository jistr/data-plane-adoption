
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="OpenStack Data Plane Adoption">
      
      
        <meta name="author" content="OpenStack Team">
      
      
        <link rel="canonical" href="https://openstack-k8s-operators.github.io/data-plane-adoption/openstack/planning/">
      
      
        <link rel="prev" href="../..">
      
      
        <link rel="next" href="../backend_services_deployment/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.14">
    
    
      
        <title>Planning the new deployment - OpenStack Data Plane Adoption</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.fad675c6.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#planning-the-new-deployment" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="OpenStack Data Plane Adoption" class="md-header__button md-logo" aria-label="OpenStack Data Plane Adoption" data-md-component="logo">
      
  <img src="../../images/openstack-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OpenStack Data Plane Adoption
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Planning the new deployment
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
</form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/openstack-k8s-operators/data-plane-adoption" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    openstack-k8s-operators/data-plane-adoption
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="OpenStack Data Plane Adoption" class="md-nav__button md-logo" aria-label="OpenStack Data Plane Adoption" data-md-component="logo">
      
  <img src="../../images/openstack-logo.png" alt="logo">

    </a>
    OpenStack Data Plane Adoption
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/openstack-k8s-operators/data-plane-adoption" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    openstack-k8s-operators/data-plane-adoption
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    OpenStack
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            OpenStack
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Planning the new deployment
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Planning the new deployment
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#configurations" class="md-nav__link">
    <span class="md-ellipsis">
      Configurations
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-tooling" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration tooling
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#node-roles" class="md-nav__link">
    <span class="md-ellipsis">
      Node Roles
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#network" class="md-nav__link">
    <span class="md-ellipsis">
      Network
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#storage" class="md-nav__link">
    <span class="md-ellipsis">
      Storage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Storage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cinder-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Cinder requirements
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../backend_services_deployment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Backend services deployment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pull_openstack_configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pull Openstack configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../stop_openstack_services/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Stop OpenStack services
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mariadb_copy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MariaDB data copy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ovn_adoption/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OVN data migration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../keystone_adoption/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Keystone adoption
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../neutron_adoption/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Neutron adoption
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ceph_backend_configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ceph backend configuration (if applicable)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../glance_adoption/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Glance adoption
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../placement_adoption/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Placement adoption
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cinder_adoption/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cinder adoption
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../horizon_adoption/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Horizon adoption
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../edpm_adoption/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    EDPM adoption
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ironic_adoption/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ironic adoption
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../heat_adoption/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Heat adoption
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Troubleshooting
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Ceph
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Ceph
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ceph/ceph_rbd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ceph RBD migration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ceph/ceph_rgw/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ceph RGW migration
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Contributing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/documentation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing to documentation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/development_environment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Development environment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/tests/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tests
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#configurations" class="md-nav__link">
    <span class="md-ellipsis">
      Configurations
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-tooling" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration tooling
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#node-roles" class="md-nav__link">
    <span class="md-ellipsis">
      Node Roles
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#network" class="md-nav__link">
    <span class="md-ellipsis">
      Network
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#storage" class="md-nav__link">
    <span class="md-ellipsis">
      Storage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Storage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cinder-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Cinder requirements
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="planning-the-new-deployment">Planning the new deployment<a class="headerlink" href="#planning-the-new-deployment" title="Permanent link">#</a></h1>
<p>Just like you did back when you installed your Director deployed OpenStack, the
upgrade/migration to the podified OpenStack requires planning various aspects
of the environment such as node roles, planning your network topology, and
storage.</p>
<p>In this document we cover some of this planning, but it is recommended to read
the whole adoption guide before actually starting the process to be sure that
there is a global understanding of the whole process.</p>
<h2 id="configurations">Configurations<a class="headerlink" href="#configurations" title="Permanent link">#</a></h2>
<p>There is a fundamental difference between the Director and Operator deployments
regarding the configuration of the services.</p>
<p>In Director deployments many of the service configurations are abstracted by
Director specific configuration options. A single Director option may trigger
changes for multiple services and support for drivers (for example Cinder's)
required patches to the Director code base.</p>
<p>In Operator deployments this has changed to what we believe is a simpler
approach: reduce the installer specific knowledge and leverage OpenShift and
OpenStack service specific knowledge whenever possible.</p>
<p>To this effect OpenStack services will have sensible defaults for OpenShift
deployments and human operators will provide configuration snippets to provide
necessary configuration, such as cinder backend configuration, or to override
the defaults.</p>
<p>This shortens the distance between a service specific configuration file (such
as <code>cinder.conf</code>) and what the human operator provides in the manifests.</p>
<p>These configuration snippets are passed to the operators in the different
<code>customServiceConfig</code> sections available in the manifests, and then they are
layered in the services available in the following levels. To illustrate this,
if we were to set a configuration at the top Cinder level (<code>spec: cinder:
template:</code>) then it would be applied to all the cinder services; for example to
enable debug in all the cinder services we would do:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">core.openstack.org/v1beta1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">OpenStackControlPlane</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">openstack</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">cinder</span><span class="p">:</span>
<span class="w">    </span><span class="nt">template</span><span class="p">:</span>
<span class="w">      </span><span class="nt">customServiceConfig</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">        </span><span class="no">[DEFAULT]</span>
<span class="w">        </span><span class="no">debug = True</span>
<span class="l l-Scalar l-Scalar-Plain">&lt; . . . &gt;</span>
</code></pre></div>
<p>If we only wanted to set it for one of the cinder services, for example the
scheduler, then we would use the <code>cinderScheduler</code> section instead:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">core.openstack.org/v1beta1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">OpenStackControlPlane</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">openstack</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">cinder</span><span class="p">:</span>
<span class="w">    </span><span class="nt">template</span><span class="p">:</span>
<span class="w">      </span><span class="nt">cinderScheduler</span><span class="p">:</span>
<span class="w">        </span><span class="nt">customServiceConfig</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">          </span><span class="no">[DEFAULT]</span>
<span class="w">          </span><span class="no">debug = True</span>
<span class="l l-Scalar l-Scalar-Plain">&lt; . . . &gt;</span>
</code></pre></div>
<p>In openshift it is not recommended to store sensitive information like the
credentials to the cinder storage array in the CRs, so most OpenStack operators
have a mechanism to use OpenShift's <code>Secrets</code> for sensitive configuration
parameters of the services and then use then by reference in the
<code>customServiceConfigSecrets</code> section which is analogous to the
<code>customServiceConfig</code>.</p>
<p>The contents of the <code>Secret</code> references passed in the
<code>customServiceConfigSecrets</code> will have the same format as <code>customServiceConfig</code>:
a snippet with the section/s and configuration options.</p>
<p>When there are sensitive information in the service configuration then it
becomes a matter of personal preference whether to store all the configuration
in the <code>Secret</code> or only the sensitive parts, but remember that if we split the
configuration between <code>Secret</code> and <code>customServiceConfig</code> we still need the
section header (eg: <code>[DEFAULT]</code>) to be present in both places.</p>
<p>Attention should be paid to each service's adoption process as they may have
some particularities regarding their configuration.</p>
<h2 id="configuration-tooling">Configuration tooling<a class="headerlink" href="#configuration-tooling" title="Permanent link">#</a></h2>
<p>In order to help users to handle the configuration for the TripleO and Openstack
services the tool: https://github.com/openstack-k8s-operators/os-diff has been
develop to compare the configuration files between the TripleO deployment and
the next gen cloud.
Make sure Golang is installed and configured on your env:</p>
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/openstack-k8s-operators/os-diff
<span class="nb">pushd</span><span class="w"> </span>os-diff
make<span class="w"> </span>build
</code></pre></div>
<p>Then configure ansible.cfg and ssh-config file according to your environment:</p>
<div class="highlight"><pre><span></span><code><span class="l l-Scalar l-Scalar-Plain">Host *</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">IdentitiesOnly yes</span>

<span class="l l-Scalar l-Scalar-Plain">Host virthost</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">Hostname virthost</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">IdentityFile ~/.ssh/id_rsa</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">User root</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">StrictHostKeyChecking no</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">UserKnownHostsFile=/dev/null</span>


<span class="l l-Scalar l-Scalar-Plain">Host standalone</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">Hostname standalone</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">IdentityFile ~/install_yamls/out/edpm/ansibleee-ssh-key-id_rsa</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">User root</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">StrictHostKeyChecking no</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">UserKnownHostsFile=/dev/null</span>

<span class="l l-Scalar l-Scalar-Plain">Host crc</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">Hostname crc</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">IdentityFile ~/.ssh/id_rsa</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">User stack</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">StrictHostKeyChecking no</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">UserKnownHostsFile=/dev/null</span>
</code></pre></div>
<p>And test your connection:</p>
<div class="highlight"><pre><span></span><code>ssh<span class="w"> </span>-F<span class="w"> </span>ssh.config<span class="w"> </span>standalone
</code></pre></div>
<h2 id="node-roles">Node Roles<a class="headerlink" href="#node-roles" title="Permanent link">#</a></h2>
<p>In Director deployments we had 4 different standard roles for the nodes:
<code>Controller</code>, <code>Compute</code>, <code>Ceph Storage</code>, <code>Swift Storage</code>, but in podified
OpenStack we just make a distinction based on where things are running, in
OpenShift or external to it.</p>
<p>When adopting a Director OpenStack your <code>Compute</code> nodes will directly become
external nodes, so there should not be much additional planning needed there.</p>
<p>In many deployments being adopted the <code>Controller</code> nodes will require some
thought because we'll have many OpenShift nodes where the controller services
could run, and we have to decide which ones we want to use, how we are going to
use them, and make sure those nodes are ready to run the services.</p>
<p>In most deployments running OpenStack services on <code>master</code> nodes can have a
seriously adverse impact on the OpenShift cluster, so we recommend placing
OpenStack services on non <code>master</code> nodes.</p>
<p>By default OpenStack Operators deploy OpenStack services on any worker node, but
that is not necessarily what's best for all deployments, and there may be even
services that won't even work deployed like that.</p>
<p>When planing a deployment it's good to remember that not all the services on an
OpenStack deployments are the same as they have very different requirements.</p>
<p>Looking at the Cinder component we can clearly see different requirements for
its services: the cinder-scheduler is a very light service with low
memory, disk, network, and CPU usage; cinder-api service has a higher network
usage due to resource listing requests; the cinder-volume service will have a
high disk and network usage since many of its operations are in the data path
(offline volume migration, create volume from image, etc.), and then we have
the cinder-backup service which has high memory, network, and CPU (to compress
data) requirements.</p>
<p>We also have the Glance and Swift components that are in the data path, and
let's not forget RabbitMQ and Galera services.</p>
<p>Given these requirements it may be preferable not to let these services wander
all over your OpenShift worker nodes with the possibility of impacting other
workloads, or maybe you don't mind the light services wandering around but you
want to pin down the heavy ones to a set of infrastructure nodes.</p>
<p>There are also hardware restrictions to take into consideration, because if we
are using a Fibre Channel (FC) Cinder backend we'll need the cinder-volume,
cinder-backup, and maybe even the glance (if it's using Cinder as a backend)
services to run on a OpenShift host that has an HBA.</p>
<p>The OpenStack Operators allow a great deal of flexibility on where to run the
OpenStack services, as we can use node labels to define which OpenShift nodes
are eligible to run the different OpenStack services.  Refer to the <a href="../node-selector/">Node
Selector guide</a> to learn more about using labels to define
placement of the OpenStack services.</p>
<p><strong>TODO: Talk about Ceph Storage and Swift Storage nodes, HCI deployments,
etc.</strong></p>
<h2 id="network">Network<a class="headerlink" href="#network" title="Permanent link">#</a></h2>
<p><strong>TODO: Write about isolated networks, NetworkAttachmentDefinition,
NetworkAttachmets, etc</strong></p>
<h2 id="storage">Storage<a class="headerlink" href="#storage" title="Permanent link">#</a></h2>
<p>When looking into the storage in an OpenStack deployment we can differentiate
2 different kinds, the storage requirements of the services themselves and the
storage used for the OpenStack users that thee services will manage.</p>
<p>These requirements may drive our OpenShift node selection, as mentioned above,
and may even require us to do some preparations on the OpenShift nodes before
we can deploy the services.</p>
<p><strong>TODO: Galera, RabbitMQ, Swift, Glance, etc.</strong></p>
<h3 id="cinder-requirements">Cinder requirements<a class="headerlink" href="#cinder-requirements" title="Permanent link">#</a></h3>
<p>The Cinder service has both local storage used by the service and OpenStack user
requirements.</p>
<p>Local storage is used for example when downloading a glance image for the create
volume from image operation, which can become considerable when having
concurrent operations and not using cinder volume cache.</p>
<p>In the Operator deployed OpenStack we now have an easy way to configure the
location of the conversion directory to be an NFS share (using the extra
volumes feature), something that needed to be done manually before.</p>
<p>Even if it's an adoption and it may seem that there's nothing to consider
regarding the Cinder backends, because we'll just be using the same ones we are
using in our current deployment, we should still evaluate it, because it may not
be so straightforward.</p>
<p>First we need to check the transport protocol the Cinder backends are using:
RBD, iSCSI, FC, NFS, NVMe-oF, etc.</p>
<p>Once we know all the transport protocols we are using, we can proceed to make
sure we are taking them into consideration when placing the Cinder services
(as mentioned above in the Node Roles section) and the right storage transport
related binaries are running on the OpenShift nodes.</p>
<p>Detailed information about the specifics for each storage transport protocol can
be found in the <a href="../cinder_adoption/">Cinder Adoption section</a>.  Please take a
good look at that document before proceeding to be able to plan the adoption
better.</p>

  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      2023-10-17
    
  </small>
</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["search.suggest", "search.highlight", "search.share"], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "latest", "provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.cd18aaf1.min.js"></script>
      
    
  </body>
</html>